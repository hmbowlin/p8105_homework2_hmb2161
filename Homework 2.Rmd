---
title: "Homework 2"
output: github_document
---
# Problem 1

* Mr. Trash Wheel Sheet
```{r}
#Load tidyverse library
library(tidyverse)

# import in the Mr. Trash Wheel sheet from mrtrashwheel dataset
# first row is skipped as it contains company logo, blank celsl are dropped, and the names are cleaned up
# drop any blank cells, select everything but homes_powered and x15, change sports_balls to an integer format
mrtrashwheel_data = 
  readxl::read_excel(
    "./data_hw2/mrtrashwheel.xlsx", 
    sheet = 1, 
    skip = 1,
    col_names = TRUE,
    col_types = NULL) %>%
janitor::clean_names() %>%
drop_na() %>%
select(-homes_powered, -x15) %>%
mutate(sport_balls = as.integer(sports_balls)) %>%
select(-sports_balls)
mrtrashwheel_data

```

* Precipitation Sheets
```{r}
precipitation_2017 = 
  readxl::read_excel(
    "./data_hw2/mrtrashwheel.xlsx", 
    sheet = 3,
    range = "A2:B14",
    col_names = TRUE,
    col_types = NULL) %>%
  mutate(year = "2017") %>%
  janitor::clean_names() %>%
  drop_na()

precipitation_2017

precipitation_2018 = 
  readxl::read_excel(
    "./data_hw2/mrtrashwheel.xlsx", 
    sheet = 4,
    range = "A2:B14",
    col_names = TRUE,
    col_types = NULL) %>%
  mutate(year = "2018") %>%
  janitor::clean_names() %>%
  drop_na()

precipitation_2018

precipitation_data = 
  bind_rows(precipitation_2017, precipitation_2018) %>%
  janitor::clean_names() %>%
  mutate(month = month.name[as.numeric(month)])

precipitation_data
```
The data in the mrtrashwheel_data set has `r nrow(mrtrashwheel_data)` number of observations. The data describe the contents, weight, and volume of dumpsters during 2015 from April to December. The mean weight of the dumpsters is `r mean(pull(mrtrashwheel_data, weight_tons))` and the median number of sports balls in each dumpster is `r median(pull(mrtrashwheel_data, sport_balls))`. The data in precipitation_data has `r nrow(precipitation_data)` number of observations. The data show the amount of precipitation per month in 2017 and 2018. For 2018 the amount of precipitation is 

# Problem 2
*Clean data in pols-month.csv
```{r}
library(tidyverse)
library(dplyr)
pols_month_data =
  read_csv(file = "./data_hw2/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names(dat = .) %>%
  separate(mon, c("year", "month", "day"), convert = TRUE) %>%
  mutate(month = month.name[as.numeric(month)]) %>%
   pivot_longer(
        cols = starts_with("prez_"),
    names_to = "president",
    names_prefix = "prez_",
    values_to = c("gop","dem")
   ) %>%
  arrange(year, month) %>%
  select(-day)

pols_month_data

```

*Clean data in snp.csv
```{r}
snp_data =
  read_csv(file = "./data_hw2/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, c("month","day","year"), convert = TRUE) %>%
  mutate(month = month.name[as.numeric(month)]) %>%
  arrange(year, month) %>%
  select(year, month, close, -day)

snp_data
```
* Clean unemployment data
```{r}
unemployment_data = 
  read_csv(file = "./data_hw2/fivethirtyeight_datasets/unemployment.csv") %>%
   pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "rate") %>%
   mutate(month = month.name[match(month,month.abb)]) %>%
  janitor::clean_names()
 
 unemployment_data
```
* Joining datasets
```{r}
fivethirtyeight_data = 
  bind_rows(pols_month_data, snp_data) %>%
  janitor::clean_names()

fivethirtyeight_data = 
  bind_rows(fivethirtyeight_data, unemployment_data) %>%
  janitor::clean_names()

fivethirtyeight_data
```
These data show various election results from months and years along with certain SNP500 close values and unemployment rates. The pols_month_data data show whether or not the governor, senators, representatives, and president were democratic or republican in that month and year from April 1947 to March 1988. The pols_month_data has `r nrow(pols_month_data)` rows and `r ncol(pols_month_data)` columns. The snp_data shows the month and year and the SNP close value of how the S&P500 stock market index did from April 1950 to May 2015. The average closing point of the S&P over the 65 years is `r mean(pull(snp_data, close))`. The snp_data has `r nrow(snp_data)` rows and `r ncol(snp_data)` columns.The unemployment_data dataset shows the unemployment rate for that month and year from January 1948 to December 2015. The average unemployment rate is `r mean(pull(unemployment_data, rate))`. The unemployment_data has `r nrow(unemployment_data)` rows and `r ncol(unemployment_data)`columns. It's important to note that all three of these datasets have different starting and ending months and years.The final combined dataset, fivethirtyeight_data has `r nrow(fivethirtyeight_data)` rows and `r ncol(fivethirtyeight_data)` columns. 

# Problem 3
```{r}
popular_baby = 
  read_csv(file = "./data_hw2/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  mutate(ethnicity = recode(ethnicity, 'ASIAN AND PACIFIC ISLANDER' = "asian and pacific islander",'BLACK NON HISPANIC' = "black", 'HISPANIC' = "hispanic", 'WHITE NON HISPANIC' = "white", 'ASIAN AND PACI' = "asian and pacific islander", 'BLACK NON HISP' = "black", 'WHITE NON HISP' = "white")) %>%
  group_by(childs_first_name, rank) %>%
  mutate("count" = row_number()) %>%
  pivot_wider(
    names_from = "ethnicity",
    values_from = "rank") %>%
  select(-count) %>%
  distinct()
  
popular_baby
```

